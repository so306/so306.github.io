<!DOCTYPE html>
<html lang="en">

<head>
    <title>Sohavni Singh</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../static/css/styles.css">
</head>

<!-- <script type="text/javascript" src="text.js"></script>
<script type="text/javascript" src="cursor.js"></script> -->

<body>

  <div class="greeting-text">Hi, I'm Sohavni</div>

  <div class="container">
    <p>currently <span class="typed-text"></span><span class="cursor">&nbsp;</span></p>
  </div>

  <div id="cursor"></div>
  <section>
    <div class="Rettangolo"></div>
  </section>

  <div class="container">
    <div class="canvas">
      <div class="square-canvas">
        <div class="top"></div>
        <div class="glass">
          <div class="lava">
            <div class="blob-drop"></div>
            <div class="blob-drop"></div>
            <div class="blob-bounce"></div>
            <div class="blob-rise"></div>
            <div class="blob-top"></div>
            <div class="blob-bottom"></div>
          </div>
        </div>
        <div class="glass-round"></div>
        <div class="base">
          <div class="trapezoid"></div>
          <div class="trapezoid"></div>
        </div>
      </div>
    </div>
  </div>
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <defs>
      <filter id="goo">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
        <feBlend in="SourceGraphic" in2="goo" />
      </filter>
    </defs>
  </svg>

  <script type="text/javascript">
    const typedTextSpan = document.querySelector(".typed-text");
    const cursorSpan = document.querySelector(".cursor");

    const textArray = ["coding", "hiking", "reading", "creating music"];
    const typingDelay = 200;
    const erasingDelay = 100;
    const newTextDelay = 2000; // Delay between current and next text
    let textArrayIndex = 0;
    let charIndex = 0;

    function type() {
      if (charIndex < textArray[textArrayIndex].length) {
        if(!cursorSpan.classList.contains("typing")) cursorSpan.classList.add("typing");
        typedTextSpan.textContent += textArray[textArrayIndex].charAt(charIndex);
        charIndex++;
        setTimeout(type, typingDelay);
      } 
      else {
        cursorSpan.classList.remove("typing");
        setTimeout(erase, newTextDelay);
      }
    }

    function erase() {
      if (charIndex > 0) {
        if(!cursorSpan.classList.contains("typing")) cursorSpan.classList.add("typing");
        typedTextSpan.textContent = textArray[textArrayIndex].substring(0, charIndex-1);
        charIndex--;
        setTimeout(erase, erasingDelay);
      } 
      else {
        cursorSpan.classList.remove("typing");
        textArrayIndex++;
        if(textArrayIndex>=textArray.length) textArrayIndex=0;
        setTimeout(type, typingDelay + 1100);
      }
    }

    document.addEventListener("DOMContentLoaded", function() { // On DOM Load initiate the effect
      if(textArray.length) setTimeout(type, newTextDelay + 250);
    });
    </script>


  </body>
    
</html>